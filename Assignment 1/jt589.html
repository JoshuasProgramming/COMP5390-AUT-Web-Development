<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--import jquery-->
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>

    <!--link to css-->
    <link rel="stylesheet" href="style.css">

    <!--Title for the page-->
    <title>Assignment 1</title>

</head>

<script>

    $(document).ready(function(
    ){
        
        //created variable to store the countryData url
        const url = 'https://www.cs.kent.ac.uk/people/staff/yh/co539-A1/countryData.php?regions';

        //console logging the country data
        $.getJSON(url, function(result){
            console.log(result);
        });

        /**
         * 1.Fetch the url of the country data
         * 2.Send a response in json
         * 3.output the json in the console
         */
        $.getJSON(url, function(result){

        //loop through each region within country data
        $.each(result, function(key,entry){
            let country = entry;
            $('#country_select_dropdown').append($('<option>').val(country).text(country));
            console.log(country);
        })


        // console.log("currently on:" + $('#country_select_dropdown').val());
        // let extra = $('#country_select_dropdown').val();

        // let regionUrl = 'https://www.cs.kent.ac.uk/people/staff/yh/co539-A1/countryData.php?region=' + extra;

        // console.log(regionUrl)
        // $.getJSON(regionUrl, function(res){
        //     $.each(res, function(k,e){
        //         console.log(e)
        //     })
        // })

        // });

        $('#country_select_dropdown').change(function() {

            alert($('#country_select_dropdown').val());
            let regionUrl = 'https://www.cs.kent.ac.uk/people/staff/yh/co539-A1/countryData.php?region=' + $('#country_select_dropdown').val();

            console.log(regionUrl);
            $.getJSON(regionUrl, function(res){
            $.each(res, function(k,e){
                console.log(e.capital);
                // $("#p").text(e.capital).val();
                $("body").append($('<p>' + (e.capital) + '</p>'));
            })
        })

        });

        });
    });
</script>

<body>
    <div class="main-container">

        <div class="select-container">
            <h1>Select a region: </h1>
            <!--dropdown select element-->
            <select name="countrySelect" id="country_select_dropdown">
            </select>
        </div>

        <div class="input-container">
            <input type="text">
            <button id="input-btn">Search</button>
        </div>
    </div>

</body>
</html>